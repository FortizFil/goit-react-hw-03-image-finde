(this["webpackJsonpgoit-react-hw-03-image-finde"]=this["webpackJsonpgoit-react-hw-03-image-finde"]||[]).push([[0],{15:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),s=n(9),c=n.n(s),r=(n(15),n(8)),l=n(3),i=n(4),h=n(6),u=n(5),p=n(0),d=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={photo:""},t.handleNameChange=function(e){t.setState({photo:e.currentTarget.value.toLowerCase()})},t.handleSubmit=function(e){e.preventDefault(),""!==t.state.photo.trim()&&(t.props.onSubmit(t.state.photo),t.setState({photo:""}))},t}return Object(i.a)(n,[{key:"render",value:function(){return Object(p.jsx)("header",{className:"Searchbar",children:Object(p.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(p.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(p.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(p.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",value:this.state.photo,onChange:this.handleNameChange})]})})}}]),n}(a.Component),m=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).handleOnClick=function(e){t.props.onClick(t.props.largeImageURL)},t}return Object(i.a)(n,[{key:"render",value:function(){return Object(p.jsx)("li",{className:"ImageGalleryItem",onClick:this.handleOnClick,children:Object(p.jsx)("img",{src:this.props.photoUrl,alt:this.props.name,className:"ImageGalleryItem-image"})})}}]),n}(a.Component),j=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this,e=this.props.photos;return Object(p.jsx)("ul",{className:"ImageGallery",children:e.map((function(e){return Object(p.jsx)(m,{name:e.id,photoUrl:e.webformatURL,largeImageURL:e.largeImageURL,onClick:function(){return t.props.onSelect(e.largeImageURL)}},e.webformatURL)}))})}}]),n}(a.Component),b=function(t){var e=t.onClickLoadMore;return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),Object(p.jsx)("button",{type:"button",className:"Button",onClick:function(){e()},children:Object(p.jsx)("span",{children:"Load More"})})};var O={fetchPhoto:function(t,e){return fetch("https://pixabay.com/api/?q=".concat(t,"&page=").concat(e,"&key=22670946-2b796d5e22242051989a80e4c&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.json()}))}},f=n(10),g=n.n(f),v=function(){return Object(p.jsx)("div",{className:"Overlay",children:Object(p.jsx)(g.a,{type:"Puff",color:"#00BFFF",height:100,width:100})})},y=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).handleCloseModal=function(e){e.target===e.currentTarget&&t.closeModal()},t.closeModal=function(){t.props.onClose()},t.handleEscKey=function(e){"Escape"===e.code&&t.closeModal()},t}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscKey)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscKey)}},{key:"render",value:function(){return Object(p.jsx)("div",{className:"Overlay",onClick:this.handleCloseModal,children:Object(p.jsx)("div",{className:"Modal",children:Object(p.jsx)("img",{src:this.props.largeImageURL,alt:""})})})}}]),n}(a.Component),S=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).state={name:"",photos:[],page:1,status:"idle",showButton:!1,modalIsOpen:null},t.handleFormSubmit=function(e){t.setState({name:e,status:"load",photos:[],page:1})},t.handleSelectImage=function(e){t.setState({modalIsOpen:e})},t.handleCloseModal=function(){t.setState({modalIsOpen:null})},t.onButton=function(){t.setState((function(t){return{page:t.page+1,status:"load"}}))},t}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(){var t=this,e=this.state.name,n=this.state.page;"load"===this.state.status&&O.fetchPhoto(e,n).then((function(e){0!==e.hits.length||1!==t.state.page?t.setState({photos:[].concat(Object(r.a)(t.state.photos),Object(r.a)(e.hits)),status:"resolved",showButton:!0}):t.setState({status:"idle",showButton:!1})}))}},{key:"render",value:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d,{onSubmit:this.handleFormSubmit}),Object(p.jsx)(j,{photos:this.state.photos,onSelect:this.handleSelectImage}),"load"===this.state.status&&Object(p.jsx)(v,{}),this.state.showButton&&Object(p.jsx)(b,{onClickLoadMore:this.onButton}),this.state.modalIsOpen&&Object(p.jsx)(y,{largeImageURL:this.state.modalIsOpen,onClose:this.handleCloseModal})]})}}]),n}(a.Component);c.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(S,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.ba817aa3.chunk.js.map